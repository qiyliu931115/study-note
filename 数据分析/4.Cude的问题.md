# 改数据

## 传统Cube(Essbase/SSAS):

不能像传统数据库那样Update一下就可以了， 

因为 Cube 里的数是“层层汇总”算好的。

你改了底层一个数，所有上层的父节点（月度汇总、季度汇总、年度汇总、地区汇总）全部都得重新计算。

后果：通常需要触发一次增量更新，或者等晚上跑批重算。

## IBM TM1：

这个还好，因为它是内存实时的，改了数，上层自动变。

## 改逻辑

比如：以前 利润 = 收入 - 成本，现在老板说要改成 利润 = (收入 - 成本) * 0.9

IBM TM1：这是它的噩梦。你需要修改“规则文件”（Rules）。

但更可怕的是它的Feeders（喂食逻辑）。你一旦改了计算公式，还得告诉系统哪些格子需要重新检查。

写错了 Feeders，要么内存爆掉服务器宕机，要么数算不对。

## 改结构/加维度

这是最劝退的场景。 比如：你们公司组织架构调整了，或者你想在报表里新增一个“用户年龄段”的分析维度。

### Oracle Essbase 的“重构”噩梦：

Essbase 的物理存储是基于维度的。如果你增加一个维度，或者调整了“稀疏/稠密”维度的定义，它需要进行全量重构 (Restructure)。

形象比喻：这就像是你盖好了一栋楼（Cube），现在你要往每层楼中间插一个房间。你必须把整栋楼拆了，重新浇筑混凝土。

后果：对于TB级的数据，这可能意味着系统要停机维护一整天甚至更久。

### SSAS 的“处理”噩梦：

修改维度结构后，Cube 会变成“未处理”状态，此时用户是查不到数的。

你必须点击“Process Full”（全量处理）。这时候服务器 CPU 会飙升，

开始疯狂读硬盘、算聚合。在算完之前，报表系统基本处于不可用或数据过时状态。