如果有100T数据，partition分区可以切割这些数据

然后存储在多台broker上

同一个topic producer生产者以partition分区为单位发送数据，

consumer消费者以partition分区为单位消费数据，提高吞吐量

![img_20.png](img_20.png)


默认分区器 default partitioner
---

如果指定了分区 往指定分区发送

如果没有指定分区 使用key.hashCode() % 分区数 进行取模后 确定是哪个分区

如果没指定分区 也没有设定key 那就使用 sticky partition（粘性分区）

    随机选择一个分区 如果该分区的batch已满或者linger.ms（逗留时间到了，没满也发车）时间到了 

    Kafka再随机选一个分区（和上一个不同）进行使用

![img_21.png](img_21.png)



