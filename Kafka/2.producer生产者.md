main线程

->

producer.send(ProducerRecord)调用方法

->

Interceptors拦截器

->

serializer序列化器

    虽然Kafka的producer是Java写的
    
    但是producer的序列化没有使用Java的序列化

-->

partitioner分区器

    分区器来判断发送到哪个分区

    一个分区会创建一个队列DQuene (这些操作都是在内存里完成)

    三个分区就是三个队列

Record accumulator 记录累加器 默认大小是32MB

    producerBatch默认大小是16k

    batch.size：只有数据累计到16K后，sender才会发哦是那个数据，默认16kb

    linger.ms：如果数据迟迟未达到batch.size，sender等待linger.ms设置

               的时间到了即使batch.size不满16kb也会发送数据，单位是ms

               默认值是0ms,表示没有延迟。

-->

sender线程 

    读取 Record accumulator中缓冲队列的数据 发送给Kafka集群

     
