如前端重复提交，接口超时重试，消息重复消费等

请求参数唯一的业务标识，在redis或者数据库中保存唯一标识，先查询判断是否存在。

1.数据库可以做乐观锁加版本号，类似CAS中的ABA处理方案。

2.而用redis话，请求接口前，可以给一个生成token的接口，业务方先获取token，然后在真正的请求中携带该token，

3.接口拿到token，判断redis是否存在该数据，有的话进行业务操作并删除token，没有的话表示非法请求，直接返回。

4.也可以在接受请求后，先放入一个set（为了去重） 后续使用异步任务处理set中的数据，实现高吞吐，但是不能实时响应，需要业务方监听支付回调。

5.分布式系统可以使用Redis锁，请求时将业务标识作为value存放到redis，结束删除，保证同一时间只能完成一次支付请求。