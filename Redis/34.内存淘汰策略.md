内存淘汰策略
---

当redis内存达到设定的阈值 redis主动挑选`部分key`

删除以释放更多的内存的流程

redis 处理`任何客户端命令`的方法process command 中尝试做内存淘汰

![img_174.png](img_174.png)

如果设置了 server.maxmemory 属性 并且没有正在运行的lua脚本

会尝试进行内存淘汰

如果进行内存淘汰失败了 会拒绝执行客户端命令

