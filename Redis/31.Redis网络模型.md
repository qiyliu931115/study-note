Redis到底是单线程还是多线程？
---

如果是redis的核心逻辑（redis的命令处理）是用单线程的

如果是整个redis 是多线程的 比如持久化：

（Redis执行BGSAVE指令，进行快照持久化时，就会fork出一个子进程，然后子进程去创建快照，完成持久化操作。）

何时引入的多线程？
---

在4.0中 引入多线程处理耗时较长的任务，例如异步删除命令unlink(异步删除，del是同步删除)

在6.0中 在核心网络模型中引入了多线程，进一步提高对于多核CPU的利用率

![img_151.png](img_151.png)

为什么要选择单线程？
---

最重要的纯内存操作，避免多线程上下文切换，和多线程并发安全问题

![img_150.png](img_150.png)


源码中的API
---

![img_152.png](img_152.png)

![img_153.png](img_153.png)

![img_154.png](img_154.png)
