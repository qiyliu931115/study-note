进程寻址空间 分为

    内核空间，用户空间

32位系统 地址最大 2^32  4GB

![img_130.png](img_130.png)

用户空间只能调用ring 3级别的命令

内核空间可以调用ring 1级别的命令

![img_131.png](img_131.png)

进程在内核和用户空间切换 分别称为 用户态 内核态

缓冲区buffer
---

用户空间和内核空间都有缓冲区buffer

比如Java的IO流 读写到缓冲区 先是在用户空间的缓冲区操作

内核空间的缓冲区主要起到一个缓存的作用

从内核读取数据 如果有的话 直接就会返回

如果用户想将数据写入磁盘，就需要切换到内核

但是内核空间是没有你的数据的 数据在用户空间

所以 需要先将用户空间的数据拷贝到内核空间

然后在把内核空间的数据写入到磁盘

如果是从硬盘读取数据 首先看内核空间有没有数据

如果没有要去磁盘寻址（这个过程中进程需要等待）

如果不是读的磁盘 是读网卡(如果网络数据没传过来，也需要等待)

等待完毕 从磁盘或者网卡读到内核空间的缓冲区

接下来把内核空间的数据拷贝到用户空间的缓冲区

![img_132.png](img_132.png)

影响IO效率最大原因是等待数据，用户空间内核空间数据的拷贝


