Condition的await和signal（类似Object的wait和notify）
---

condition的await和signal(see ge no)(信号，标志)和wait，notify一样

await和signal都需要在lock中

而且await必须在signal前面

synchronized和condition的等待唤醒都要   遵循before和after的原则


    public class ProducerConsumerTest {
    
        public static void main(String[] args) {
    
            Share share = new Share();
    
            new Thread(()->{
                for (int i = 0; i< 5;i++) {
                    share.incr();
                }
            }, "A").start();
    
            new Thread(()->{
                for (int i = 0; i< 5;i++) {
                    share.decr();
                }
            }, "B").start();
    
            new Thread(()->{
                for (int i = 0; i< 5;i++) {
                    share.incr();
                }
            }, "C").start();
    
            new Thread(()->{
                for (int i = 0; i< 5;i++) {
                    share.decr();
                }
            }, "D").start();
        }
    }
    
    class Share{
    
        public volatile int count = 0;
    
        private Lock lock = new ReentrantLock();
    
        private Condition condition = lock.newCondition();
    
        public void incr() {
            lock.lock();
    
            try {
                while (count != 0) {
                    condition.await();
    
                }
                count++;
                System.out.println(Thread.currentThread().getName() + ":" + count);
                condition.signalAll();
    
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }finally {
                lock.unlock();
            }
        }
    
        public void decr() {
            lock.lock();
    
            try {
                while (count == 0) {
                    condition.await();
    
                }
                count--;
                System.out.println(Thread.currentThread().getName() + ":" + count);
                condition.signalAll();
    
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }finally {
                lock.unlock();
            }
    
        }
    
    }

